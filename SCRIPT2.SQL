USE `NOTAFISCAL`;
DROP procedure IF EXISTS `POPULANF`;

DELIMITER $$
USE `NOTAFISCAL`$$
CREATE DEFINER=`root`@`%` PROCEDURE `POPULANF`()
BEGIN
	DECLARE VCONTADOR INT;
  DECLARE VDATACADASTRO DATE;

  SET VCONTADOR = 1;
	SET VDATACADASTRO = (SELECT DATE_SUB(DATE(NOW()), INTERVAL 10 DAY));

    WHILE VCONTADOR <= 1000 DO

        INSERT INTO EXAME_NF (IDNF, NUMERO, DATACADASTRO, TOTALGERAL) VALUES ( NULL, VCONTADOR, VDATACADASTRO, 3);

        INSERT INTO EXAME_ITEM_NF (IDITEMNF, IDNF, IDPRODUTO, QTDE, VALOR) VALUES
            ( NULL, VCONTADOR, FLOOR(RAND()*(1000-1+1)+5), 1, 1),
            ( NULL, VCONTADOR, FLOOR(RAND()*(1000-1+1)+5), 1, 1),
            ( NULL, VCONTADOR, FLOOR(RAND()*(1000-1+1)+5), 1, 1);

        IF (MOD(VCONTADOR, 100) = 0) THEN
			    SET VDATACADASTRO = DATE_ADD(VDATACADASTRO, INTERVAL 1 DAY;
        END IF;

        SET VCONTADOR = VCONTADOR + 1;
    END WHILE;

END$$

DELIMITER ;

