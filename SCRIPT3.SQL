USE `NOTAFISCAL`;
DROP procedure IF EXISTS `DEFINIR_VALORES`;

DELIMITER $$
USE `NOTAFISCAL`$$
CREATE DEFINER=`root`@`%` PROCEDURE `DEFINIR_VALORES`()
BEGIN
    UPDATE EXAME_ITEM_NF SET VALOR = FLOOR(RAND()*(1000-1+1)+5);

    UPDATE EXAME_NF AS ENF SET TOTALGERAL = (SELECT SUM(VALOR) FROM EXAME_ITEM_NF AS EINF WHERE ENF.IDNF=EINF.IDNF);
END$$

DELIMITER ;